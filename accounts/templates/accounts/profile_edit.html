<!-- accounts/templates/accounts/profile_edit.html -->
{% extends "films/base.html" %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">Редактировать профиль</h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="mb-3">
            <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
            {{ form.username }}
            {% if form.username.errors %}
                <div class="text-danger">{{ form.username.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
            {{ form.email }}
            {% if form.email.errors %}
                <div class="text-danger">{{ form.email.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.birthday.id_for_label }}" class="form-label">{{ form.birthday.label }}</label>
            {{ form.birthday }}
            {% if form.birthday.errors %}
                <div class="text-danger">{{ form.birthday.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.avatar.id_for_label }}" class="form-label">{{ form.avatar.label }}</label>
            {{ form.avatar }}
            {% if form.avatar.errors %}
                <div class="text-danger">{{ form.avatar.errors }}</div>
            {% endif %}
            {% if form.instance.avatar %}
                <div class="mt-2">
                    <img src="{{ form.instance.avatar.url }}" alt="Текущий аватар" class="img-thumbnail" style="max-width: 100px;">
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.bio.id_for_label }}" class="form-label">{{ form.bio.label }}</label>
            {{ form.bio }}
            {% if form.bio.errors %}
                <div class="text-danger">{{ form.bio.errors }}</div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Сохранить</button>
        <a href="{% url 'accounts:profile' %}" class="btn btn-secondary">Отмена</a>
    </form>
</div>
{% endblock %}